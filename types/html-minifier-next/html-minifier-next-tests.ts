import required = require("html-minifier-next");
import imported, { type MinifierOptions, minify } from "html-minifier-next";
import * as namespaced from "html-minifier-next";

// $ExpectType Promise<string>
imported.minify("<p title=\"blah\" id=\"moo\">foo</p>");

// $ExpectType Promise<string>
required.minify("<p title=\"blah\" id=\"moo\">foo</p>");

// $ExpectType Promise<string>
namespaced.minify("<p title=\"blah\" id=\"moo\">foo</p>");

const options: MinifierOptions = {
    caseSensitive: true,
    collapseBooleanAttributes: true,
    collapseInlineTagWhitespace: true,
    collapseWhitespace: true,
    conservativeCollapse: true,
    continueOnParseError: true,
    customAttrAssign: [/.*/],
    customAttrCollapse: /ng-class/,
    customAttrSurround: [/btn-class/],
    customEventAttributes: [/on-click/],
    customFragmentQuantifierLimit: 144,
    decodeEntities: true,
    html5: false,
    ignoreCustomComments: [/^!/, /^\s*#/],
    ignoreCustomFragments: [/<%[\s\S]*?%>/, /<\?[\s\S]\*?\?>/],
    includeAutoGeneratedTags: false,
    keepClosingSlash: false,
    maxLineLength: 20,
    maxInputLength: 1000,
    minifyCSS: true,
    minifyJS: true,
    minifyURLs: true,
    noNewlinesBeforeTagClose: true,
    preserveLineBreaks: true,
    preventAttributesEscaping: true,
    processConditionalComments: true,
    processScripts: ["text/v-text"],
    quoteCharacter: "\"",
    removeAttributeQuotes: true,
    removeComments: true,
    removeEmptyAttributes: true,
    removeEmptyElements: true,
    removeOptionalTags: true,
    removeRedundantAttributes: true,
    removeScriptTypeAttributes: true,
    removeStyleLinkTypeAttributes: true,
    removeTagWhitespace: true,
    sortAttributes: true,
    sortClassName: true,
    trimCustomFragments: true,
    useShortDoctype: true,
};

const optionsRequired: required.MinifierOptions = options;
const optionsNamespaced: namespaced.MinifierOptions = options;

// $ExpectType Promise<string>
minify("<p title=\"blah\" id=\"moo\">foo</p>", options);

// $ExpectType Promise<string>
namespaced.default.minify("<p title=\"blah\" id=\"moo\">foo</p>", options);

// $ExpectType Promise<string>
required.default.minify("<p title=\"blah\" id=\"moo\">foo</p>", options);
